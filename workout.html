<!doctype html>
<html lang="en" data-theme="sunlit">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Workout Builder</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <header class="topbar">
    <div class="wrap topbar-inner">
      <div class="brand">
        <div class="brand-title">Workout Builder</div>
        <div class="brand-sub">Build workouts from your exercise library, then run them with an interval/rest timer.</div>
      </div>
      <nav class="nav">
        <a class="navlink" href="index.html">Home</a>
        <a class="navlink" href="back-pain.html">Back Pain Relief</a>
        <a class="navlink" href="workout.html" aria-current="page">Workout Builder</a>
      </nav>
      <div class="theme-control">
        <label class="theme-label" for="themeSelect">Theme</label>
        <select id="themeSelect" class="select theme-select">
          <option value="sunlit">Sunlit</option>
          <option value="citrus">Citrus</option>
          <option value="sky">Sky</option>
          <option value="midnight">Midnight</option>
          <option value="forest">Forest</option>
          <option value="charcoal">Charcoal</option>
        </select>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="panel">
      <div class="panel-head">
        <h1 class="h1">Build your workout</h1>
        <p class="muted">
          Add exercises from the library using the <b>Add</b> button on any exercise card.
          Configure sets/reps or timed intervals, and rest between sets.
        </p>
      </div>

      <div class="builder-toolbar">
        <div class="field">
          <label class="label" for="workoutName">Workout name</label>
          <input id="workoutName" class="input" type="text" placeholder="e.g., Push Day A">
        </div>

        <div class="field">
          <label class="label" for="globalRest">Default rest between sets (seconds)</label>
          <input id="globalRest" class="input" type="number" min="0" step="5" value="60">
          <div class="muted small">Used when an exercise does not override rest.</div>
        </div>

        <div class="field">
          <label class="label" for="autoStartRest">Auto-start rest timer</label>
          <select id="autoStartRest" class="select">
            <option value="yes" selected>Yes</option>
            <option value="no">No (manual)</option>
          </select>
          <div class="muted small">If set complete, rest begins automatically.</div>
        </div>

        <div class="field">
          <label class="label" for="savedWorkoutSelect">Saved workouts</label>
          <select id="savedWorkoutSelect" class="select">
            <option value="">No saved workouts</option>
          </select>
          <div class="muted small">Load a saved workout into the builder.</div>
        </div>

        <div class="toolbar-actions">
          <button id="applyDefaults" class="btn secondary" type="button">Apply defaults</button>
          <button id="clearWorkout" class="btn secondary" type="button">Clear</button>
          <button id="saveWorkout" class="btn secondary" type="button">Save</button>
          <button id="loadWorkout" class="btn secondary" type="button">Load</button>
          <button id="deleteWorkout" class="btn danger" type="button">Delete</button>
          <button id="startWorkout" class="btn primary" type="button">Start</button>
        </div>
      </div>

      <div class="builder-grid">
        <div>
          <div class="muted small">Workout items</div>
          <div id="workoutList" class="stack" style="margin-top:10px;"></div>
          <div id="emptyState" class="muted" style="margin-top:10px;">
            No exercises added yet. Go to Home or a muscle group page and click <b>Add</b> on an exercise.
          </div>
        </div>

        <div>
          <div class="muted small">Run console</div>
          <div class="panel runner-placeholder">
            <div class="muted">Press Start to open the workout runner view.</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div class="run-modal" id="runModal" aria-hidden="true">
    <div class="run-modal-backdrop" data-action="closeRun"></div>
    <div class="run-modal-panel" role="dialog" aria-modal="true" aria-labelledby="runTitle">
      <div class="run-modal-header">
        <div>
          <div class="runner-title" id="runModalTitle">Workout runner</div>
          <div class="muted small" id="runModalSub">Track sets, reps, and weights as you go.</div>
        </div>
        <button class="btn secondary" type="button" data-action="closeRun">Close</button>
      </div>

      <div class="runner panel runner-panel" id="runner">
        <div class="runner-top">
          <div>
            <div class="runner-title" id="runTitle">Not started</div>
            <div class="runner-sub muted" id="runSub">Press Start when your workout is ready.</div>
          </div>
          <div class="chips" id="runChips"></div>
        </div>

        <div class="timer">
          <div class="timer-value" id="timerValue">00:00</div>
          <div class="timer-label muted" id="timerLabel">Timer</div>
        </div>

        <div class="set-log" id="setLog">
          <div class="muted small">Log this set</div>
          <div class="set-log-grid">
            <div class="field">
              <label class="label" for="runReps">Reps done</label>
              <input id="runReps" class="input" type="number" min="0" step="1" placeholder="Target: --">
            </div>
            <div class="field">
              <label class="label" for="runWeight">Weight</label>
              <input id="runWeight" class="input" type="text" placeholder="e.g., 135 lb / 60 kg">
            </div>
            <div class="field">
              <label class="label" for="runNotes">Notes</label>
              <input id="runNotes" class="input" type="text" placeholder="RPE, form notes, tempo">
            </div>
          </div>
        </div>

        <div class="runner-actions">
          <button id="pauseResume" class="btn secondary" type="button" disabled>Pause</button>
          <button id="completeSet" class="btn primary" type="button" disabled>Set complete</button>
          <button id="skip" class="btn secondary" type="button" disabled>Skip</button>
          <button id="stop" class="btn danger" type="button" disabled>Stop</button>
        </div>

        <div class="muted small" style="margin-top:10px;" id="runnerHint">
          Timed sets run automatically. For rep-based sets, click <b>Set complete</b> to begin rest and advance.
        </div>
      </div>

      <div class="panel run-summary" id="runSummary" hidden>
        <div class="panel-head">
          <div class="h2">Workout summary</div>
          <div class="muted" id="runSummarySub">Set details logged during the session.</div>
        </div>
        <div id="runSummaryBody" class="summary-list"></div>
      </div>
    </div>
  </div>

  <div class="overlay-modal" id="pauseModal" aria-hidden="true">
    <div class="overlay-modal-backdrop" data-action="closePause"></div>
    <div class="overlay-modal-panel" role="dialog" aria-modal="true" aria-labelledby="pauseTitle">
      <div class="overlay-modal-head">
        <div class="runner-title" id="pauseTitle">Workout paused</div>
        <div class="muted small">Resume or stop this session.</div>
      </div>
      <div class="overlay-modal-actions">
        <button class="btn primary" type="button" data-action="resumeWorkout">Resume</button>
        <button class="btn danger" type="button" data-action="requestStop">Stop workout</button>
      </div>
    </div>
  </div>

  <div class="overlay-modal" id="confirmStopModal" aria-hidden="true">
    <div class="overlay-modal-backdrop" data-action="closeConfirmStop"></div>
    <div class="overlay-modal-panel" role="dialog" aria-modal="true" aria-labelledby="confirmStopTitle">
      <div class="overlay-modal-head">
        <div class="runner-title" id="confirmStopTitle">Stop workout?</div>
        <div class="muted small">Are you sure you want to stop your workout?</div>
      </div>
      <div class="overlay-modal-actions">
        <button class="btn secondary" type="button" data-action="closeConfirmStop">Keep going</button>
        <button class="btn danger" type="button" data-action="confirmStop">Yes, stop</button>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="wrap muted">Workouts are stored locally in your browser.</div>
  </footer>

  <script src="js/theme.js"></script>
  <script type="module" src="js/app-workout.js"></script>
</body>
</html>
